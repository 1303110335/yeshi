<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>我的购物车</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta content="telephone=yes" name="format-detection" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="__CSS__/css.css">
<link rel="stylesheet" href="__CSS__/swiper.min.css">
<link rel="stylesheet" href="__CSS__/iconfont1/iconfont1.css">
<link rel="stylesheet" href="__CSS__/iconfont/iconfont.css">
<script type="text/javascript" src="http://api.map.baidu.com/api?v=1.2"></script>
<script type="text/javascript" src="http://api.map.baidu.com/library/GeoUtils/1.2/src/GeoUtils_min.js"></script>
</head>
<body id="scroll_top">
<!-- top --> 
<div style="display:ne" id="container"></div>
<!-- top --> 
<!-- main_div -->
<div class="main_div" style=" padding-bottom:150px;">
  <div class="ddlb_lb">
<foreach name="shop" item="vo">
    <div class="ddlb_list">
      <div class="qrzf">
        <div class="qrzf_cp">
          <input type="checkbox" name="choose" value="{$vo.id}" id="choose{$vo.id}" style=" float:left; margin-top:7%; margin-right:2%;">
          <div class="qrzf_cp_left"> <img src="{$vo.pic}" width="100%"> </div>
          <div class="qrzf_cp_right">
            <h1>{$vo.good_name}</h1><input type="hidden" name="prices{$vo.id}" id="prices{$vo.id}" value="{$vo.price}" />
            <input type="hidden" name="total_price{$vo.id}" id="total_price{$vo.id}" value="{$vo.total_price}" />
            <p>数量：<font id="s_num{$vo.id}">{$vo.num}</font> <span class="shuliang">{$vo.price}</span><span class="damwei">/件</span></p>
            <p>规格：{$vo.weight}KG<neq name="vo.nums" value="">/{$vo.nums}个</neq></p>
            <p>小计：￥<span class="shuliang"><font id="s_price{$vo.id}">{$vo.total_price}</font></span></p>
          </div>
        </div>
        <div class="clear"></div>
      </div>
      <div class="ddlb_jg">
        <div class="qrzf_sl_xz1">
          <ul>
            <li>
              <div class="qrzf_sl_xzs1" onClick="jian({$vo.id})"> - </div>
            </li>
            <li>
              <div class="qrzf_sl_xzs1" style="background:#fff;">
                <p>
                  <input class="xdsl1" name="nums{$vo.id}" id="nums{$vo.id}" type="text" value="{$vo.num}" style=" border:none;">
                  件</p>
                <div class="clear"></div>
              </div>
            </li>
            <li>
              <div class="qrzf_sl_xzs1" onClick="jia({$vo.id})" style="border-right:none;"> + </div>
            </li>
          </ul>
          <div class="clear"></div>
        </div>
        <h1><span class="iconfont" style=" font-size:20px;">&#xe64f </span> <br/>
          <span style=" font-size:14px;" onclick="{if(confirm('确定删除产品吗?')){del_shop({$vo.id});return true;}return false;} ">删除</span> </h1>
        <div class="clear"></div>
      </div>
    </div>
</foreach>
<if condition="$shop">
    <div class="gwc_js">
      <div class="gwc_jsnav">
        <div class="gwc_jsleft">
        	<p onclick="selectAll()"><input type="checkbox"/>&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" name="select" value="全选/全不选" style=" background:none ;border:none"/></p>
          <p style="margin-top:5px">总计：<span>¥<font>{$total_count}</font></span></p>
        </div><input type="hidden" name="total_prices" id="total_prices" value="{$total_count}" />
        <div class="gwc_jsright">
          <a href="javascript:void(0)"  onClick="change_check()">
          <p>立即结算</p>
          </a> 
        </div>
      </div>
    </div>
<else />
<div class="gwc_js" style="margin-top:100px;">
      <div class="gwc_jsnav">
        <div class="gwc_jsleft" style="float:none;width:auto;margin:0 auto;">
        	
          <p style="margin-top:5px;text-align:center;">暂无订单...</p>
        </div>
        <div class="gwc_jsright" style="float:none;margin-top:30px;"> <a href="{:U('Goods/category')}" >
          <p>立即购买</p>
          </a> </div>
      </div>
    </div>
</if>
  </div>
</div>

<!-- main_div -->
<div class="scorll_top"><a href="#scroll_top"><img src="__IMAGES__/scorll_top.png"></a></div>
<!-- footer -->
<include file="Public:foot" />
<!-- footer --> 
<!-- dizhi --> 
<!-- dizhi -->
<div class="dizhi" style="display:none;"> 
  <!-- dizhi1 -->
  <div class="dizhi1">
    <div class="xzcity"> <img src="__IMAGES__/xzcity.png" width="100%">
      <div class="city_wz">
        <div class="city_tb"><img src="__IMAGES__/city_tb.png"></div>
        <div class="city_p"><a href="javascript:void(0);">亲，请先选择您的收货城市</a></div>
        <div class="city_jt"><a href="javascript:void(0);"><img src="__IMAGES__/city_jt.png" onmouseover="this.src='images/city_jth.png'" onmouseout="this.src='images/city_jt.png'" width="100%" ></a></div>
        <div class="clear"></div>
      </div>
    </div>
  </div>
  <!-- dizhi1 --> 
  <!-- dizhi2 -->
  <div class="dizhi2"> 
    <!-- city_div -->
    <div class="city_div">
      <div class="chose_city">选择收货城市</div>
      <div class="city_xuanze"> 
        <!-- city_xuanze_js -->
        <div class="info">
          <div>
            <select id="s_province" name="s_province">
            </select>
            &nbsp;&nbsp;
            <select id="s_city" name="s_city" >
            </select>
            &nbsp;&nbsp;
            <select id="s_county" name="s_county">
            </select>
            <script class="resources library" src="__JS__/area.js" type="text/javascript"></script> 
            <script type="text/javascript">_init_area();</script> 
          </div>
          <div id="show"></div>
        </div>
        <!-- city_xuanze_js --> 
      </div>
      <div class="xuanze_qd"><a href="javascript:void(0);">确定</a></div>
    </div>
    <!-- city_div --> 
    <!-- city_div1 -->
    <div class="city_div1">
      <div class="peisong">根据您在<span>杭州</span>的区域选择配送方式</div>
      <div class="wuliu">
        <div class="wl_name">
          <input type="radio" checked="checked" name="sex"  	value="male"/>
          叶氏物流</div>
        <div class="wl_didian">下城区、上城区、西湖区、滨江区、江干区、拱墅区、余杭区、萧山区</div>
      </div>
      <div class="wuliu">
        <div class="wl_name">
          <input type="radio" checked="checked" name="sex"  	value="male"/>
          第三方物流</div>
        <div class="wl_didian">淳安县、临安县、富阳市、桐庐县、建德市</div>
        <div class="xuanze_qd1"><a href="javascript:void(0);">确定</a></div>
      </div>
    </div>
    <!-- city_div1 --> 
    <!-- tishi -->
    <div class="tishi">
      <div class="tishi_nr">
        <div class="tishi_nr1">切换城市将清空购物车</div>
        <div class="tishi_nr2">
          <div class="tishi_nr2a"><a href="javascript:void(0);">取消</a></div>
          <div class="tishi_nr2b"><a href="javascript:void(0);">确认</a></div>
          <div class="clear"></div>
        </div>
      </div>
    </div>
    <!-- tishi --> 
  </div>
  <!-- dizhi2 --> 
</div>
<!-- dizhi --> 
<!-- dizhi -->
</body>
<script src="__JS__/jquery.min.js"></script>
<!-- banner -->
<script src="__JS__/swiper.min.js"></script>
<script>


    var swiper = new Swiper('.swiper-container', {
        pagination: '.swiper-pagination',
        paginationClickable: true,
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        // Enable debugger
        debugger: true
    });
    </script>
    <script language="JavaScript">
    function jia(g){
            var shop_id = $('#choose'+g).val();
            var nums= $("#nums"+g).val();
			
            $.ajax({
                url: "{:U('/Home/Member/addnums')}",
                type: "post",
                dataType: "json",
                data: {
                    shop_id: shop_id,
					nums: nums
                }
            }).done(function (e) {
				$("#s_num"+g).text(e.num);
				$("#nums"+g).val(e.num);
				$("#s_price"+g).text(e.total_price);
				$("#total_price"+g).val(e.total_price);
				$(".gwc_jsleft font").text(e.to_price);
            })

        }
		
		function jian(g){
            var shop_id = $('#choose'+g).val();
            var nums= $("#nums"+g).val();
			
            $.ajax({
                url: "{:U('/Home/Member/decnums')}",
                type: "post",
                dataType: "json",
                data: {
                    shop_id: shop_id,
					nums: nums
                }
            }).done(function (e) {
				$("#s_num"+g).text(e.num);
				$("#nums"+g).val(e.num);
				$("#s_price"+g).text(e.total_price);
				$("#total_price"+g).val(e.total_price);
				$(".gwc_jsleft font").text(e.to_price);
            })

        }
		
		
		function del_shop(g){
			
            var shop_id = g;
            $.ajax({
                url: "{:U('/Home/Member/delshop')}",
                type: "post",
                dataType: "json",
                data: {
                    shop_id: shop_id
                }
            }).done(function (e) {
				location.href="{:U('Member/shopping')}"
            })

        }
		
		
		
	
</script>
<script>
function change_check(){
	obj = document.getElementsByName("choose");
	check_val = [];
	for(k in obj){
		if(obj[k].checked)
			check_val.push(obj[k].value);
	}
	if(check_val!=''){
	
	location.href="{:U('/Home/Order/addshoppingorder')}/ids/"+check_val
	}else{
		alert('请选择商品！');
		}
	
		}
</script>

<script language=javascript>
function selectAll(){
var a = document.getElementsByTagName("input");
if(a[0].checked){
for(var i = 0;i<a.length;i++){
if(a[i].type == "checkbox") a[i].checked = false;
}
}
else{
for(var i = 0;i<a.length;i++){
if(a[i].type == "checkbox") a[i].checked = true;
}
}
}
</script>
<!-- banner -->
<script src="__JS__/js.js"></script>
</html>