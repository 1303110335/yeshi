<include file="Public:head"/>

<style>
	.imgnav{
		max-height: 30px;
		overflow: hidden;
		cursor: pointer;
	}
	.imgwrapper{
		display: block;
		width: 78px;
		height: 78px;
		overflow: hidden;
	}
	.imgwrapper img{
		display: block;
		width: 100%;
		padding: 0;
		margin: 0;
		border:0;
	}
	.spanpd10{
		margin:10px;
	}
	.wxtables.wxtables-sku.newtable{
		width: 40%;
		margin: 0;
	}
	.img-list li{
		width: 60px;
		height:60px;
	}
	.cst_h3 span{font-weight: normal;}
	#imgdiv img{ max-width:190px; max-height:190px; display:none; margin:5px;}
	#xuanze{ width:60px; height:30px; background:white; border:1px solid #d9d9d9; }
	#xuanze:hover{ background:#E6E6E6; }
	#imgdiv2 img{ max-width:88px; max-height:88px; display:none; margin:5px;}
	#xuanze2{ width:60px; height:30px; background:white; border:1px solid #d9d9d9; }
	#xuanze2:hover{ background:#E6E6E6; }
	.huase{display:none; width:86px; height:30px; margin:5px; text-indent:5px;}

	body, html{width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}
	#allmap {width: 100%; height:500px; overflow: hidden;}
	#result {width:100%;font-size:12px;}
	dl,dt,dd,ul,li{
		margin:0;
		padding:0;
		list-style:none;
	}
	</style>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=A607d61b18d43a1ff27abf4ac67da83c"></script>
	<!--加载鼠标绘制工具-->
	<script type="text/javascript" src="__JS__/drawingmanager.js"></script>
	<link rel="stylesheet" href="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css" />
	<!--加载检索信息窗口-->
	<script type="text/javascript" src="__JS__/searchinfowindow_min.js"></script>
	<link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.4/src/SearchInfoWindow_min.css" />
<div class="container">
<div class="inner clearfix">
<div class="content-left fl">
      <dl class="left-menu shop_7 sub_users">
        <dt> <i class="icon-menu users"></i> <span id="shop_7" data-id="7">经销商</span> </dt>
        <dd class="subshop_1 active"> <a href="{:U('/Admin/Dealer/index')}">经销商管理</a> </dd>
        <dd class="subshop_1"> <a href="{:U('/Admin/Dealer/store')}">门店管理</a> </dd>
      </dl>
    </div>
<!-- end content-left -->

<div class="content-right fl">
 

    <h1 class="content-right-title">添加经销商</h1>
    
    
<input type="hidden" id="j-isSid" value="0"><!-- 是否选择了淘宝类目 -->
<input type="hidden" id="j-hasNorms" value="1"><!-- 淘宝类目下是否有属性 -->
<input type="hidden" id="supplier" value="">

<form aciton="{:U('/Admin/Dealer/add')}" enctype="multipart/form-data" method="post" id="add_step2" onsubmit="return toVaild()">



<div class="panel-single panel-single-light">
    <h3 class="cst_h3 mgb20">基本信息</h3>
    <div class="formitems">
        <label class="fi-name"><span class="colorRed">*</span>经销商名称：</label>
        <div class="form-controls">
            <input type="text" class="input large" name="username" id="username" value="">
            <span class="fi-help-text"></span>
        </div>
    </div>
    
	<div class="formitems">
        <label class="fi-name"><span class="colorRed">*</span>ERP appid：</label>
        <div class="form-controls">
            <input type="text" class="input large" name="erpappid" >
            <span class="fi-help-text"></span>
        </div>
    </div>
	<div class="formitems">
        <label class="fi-name"><span class="colorRed">*</span>ERP key：</label>
        <div class="form-controls">
            <input type="text" class="input large" name="erpkey" >
            <span class="fi-help-text"></span>
        </div>
    </div>
    <div class="formitems">
        <label class="fi-name"><span class="colorRed">*</span>联&nbsp; 系 人：</label>
        <div class="form-controls">
            <input type="text" class="input large" name="truename" id="truename" value="">
            <span class="fi-help-text"></span>
        </div>
    </div>
    
    <div class="formitems">
        <label class="fi-name"><span class="colorRed">*</span>手　　机：</label>
        <div class="form-controls">
            <input type="text" class="input large" name="mobilephone" id="mobilephone" value="" maxlength="11">
            <span class="fi-help-text"></span>
        </div>
    </div>
    
    <div class="formitems">
        <label class="fi-name"><span class="colorRed">*</span>登陆密码：</label>
        <div class="form-controls">
            <input type="password" class="input large" name="password" id="password" value="">
            <span class="fi-help-text"></span>
        </div>
    </div>
	
    <div class="formitems">
        <label class="fi-name"><span class="colorRed"></span>是否显示：</label>
        <div class="form-controls">
            <div class="radio-group">
                <label><input type="radio" name="is_show" value="1" checked="checked" />显示</label>
                <label><input type="radio" name="is_show" value="0" />隐藏</label>
              </div>

          
            <span class="fi-help-text"></span>
        </div>
    </div>
	
    
</div>
<!-- end 基本信息 -->


<!-- <button id="test">show sku</button> -->

<div class="panel-single panel-single-light mgt20 j-showinhyd" style="display: block;">
    <h3 class="cst_h3 mgb20">区块划分</h3>

    <div class="formitems">
	<div id="allmap" style="overflow:hidden;zoom:1;position:relative;">	
		<div id="map" style="height:100%;-webkit-transition: all 0.5s ease-in-out;transition: all 0.5s ease-in-out;"></div>
	</div>
    </div>
    
	<div class="formitems">
    	<input type="hidden" class="input xxlarge" name="qnum" id="qnum" value="">
        <input type="hidden" class="input xxlarge" name="longitude" id="longitude" value="">
        <input type="hidden" class="input xxlarge" name="latitude" id="latitude" value="">
    </div>
	<div class="formitems">
        <div id="result">
            <input type="button" value="重新划分区块" onClick="clearAll()"/>
        </div>
    </div> 

</div>
<!-- end 详情及其它 -->



<div class="panel-single panel-single-light mgt20 txtCenter">
    <a href="" class="btn">取消</a>
    <input type="submit" class="btn btn-primary" value="保存">
</div>
</form>

</div>
<!-- end content-right -->
</div>
</div>
<!-- end container -->

<include file="Public:foot"/>

	<script type="text/javascript">
	// 百度地图API功能
    var map = new BMap.Map('map');
    var poi = new BMap.Point(120.161693,30.280059);
    map.centerAndZoom(poi, 12);
    map.enableScrollWheelZoom();
    var overlays = [];
	var overlaycomplete = function(e){
        overlays.push(e.overlay);
		document.getElementById("qnum").value=overlays.length;

var jingdu="";
var weidu="";

		var olRectPoint = e.overlay.ia;
		var i=olRectPoint.length;
		var sw1="";

		for(var m=0;m<=i;m++){
			
			sw1 = olRectPoint[m];
			jingdu=jingdu+sw1.lng+",";
			weidu=weidu+sw1.lat+",";
		    document.getElementById("longitude").value=jingdu;
		    document.getElementById("latitude").value=weidu;
			
		}

    };
    var styleOptions = {
        strokeColor:"red",    //边线颜色。
        fillColor:"red",      //填充颜色。当参数为空时，圆形将没有填充效果。
        strokeWeight: 3,       //边线的宽度，以像素为单位。
        strokeOpacity: 0.8,	   //边线透明度，取值范围0 - 1。
        fillOpacity: 0.6,      //填充的透明度，取值范围0 - 1。
        strokeStyle: 'solid' //边线的样式，solid或dashed。
    }
    //实例化鼠标绘制工具
    var drawingManager = new BMapLib.DrawingManager(map, {
        isOpen: false, //是否开启绘制模式
        enableDrawingTool: true, //是否显示工具栏
        drawingToolOptions: {
            anchor: BMAP_ANCHOR_TOP_RIGHT, //位置
            offset: new BMap.Size(5, 5), //偏离值
        },
        circleOptions: styleOptions, //圆的样式
        polylineOptions: styleOptions, //线的样式
        polygonOptions: styleOptions, //多边形的样式
        rectangleOptions: styleOptions //矩形的样式
    });  
	 //添加鼠标绘制工具监听事件，用于获取绘制结果
    drawingManager.addEventListener('overlaycomplete', overlaycomplete);
    function clearAll() {
		for(var i = 0; i < overlays.length; i++){
            map.removeOverlay(overlays[i]);
        }
        overlays.length = 0 ;
		document.getElementById("qnum").value="";
		document.getElementById("longitude").value="";
		document.getElementById("latitude").value="";
    }
</script>


<!--提交表单前验证-->
<script type="text/javascript">
    function toVaild(){

        var username=$('#username').val();
        var turename=$('#turename').val();
        var mobilephone=$('#mobilephone').val();
        var password=$('#password').val();
        var longitude=$('#longitude').val();
        var latitude=$('#latitude').val();

		if(username==''){
			alert('请填写区域名称');
			$('#username').focus();
			return false;
		}
		if(turename==''){
			alert('请填写联系人');
			$('#turename').focus();
			return false;
		}
		if(mobilephone==''){
			alert('请填写手机号');
			$('#mobilephone').focus();
			return false;
		}
        if(password==''){
            alert('请填写登陆密码');
			$('#password').focus();
            return false;
        }
        if(longitude==''){
            alert('请选择区域');
            return false;
        }
        if(latitude==''){
            alert('请选择区域');
            return false;
        }

    }
</script>
<!--提交表单前验证end-->